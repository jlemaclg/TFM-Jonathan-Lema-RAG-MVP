# Agentic RAG MVP - Environment Configuration
# Copy this file to .env and fill in your values

# ==========================================
# OPENAI CONFIGURATION
# ==========================================
OPENAI_API_KEY=sk-xxxx
OPENAI_MODEL=gpt-4o-mini
OPENAI_EMBEDDING_MODEL=text-embedding-3-small
OPENAI_MAX_TOKENS=4096
OPENAI_TEMPERATURE=0.1

# ==========================================
# DATABASE CONFIGURATION
# ==========================================
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=ragdb
POSTGRES_USER=rag
POSTGRES_PASSWORD=ragpass
POSTGRES_SSL_MODE=disable

# Database URLs for each service
AUTH_DATABASE_URL=postgresql://rag:ragpass@localhost:5432/ragdb
FEEDBACK_DATABASE_URL=postgresql://rag:ragpass@localhost:5432/ragdb

# ==========================================
# MINIO (S3 COMPATIBLE STORAGE)
# ==========================================
MINIO_ENDPOINT=localhost:9000
MINIO_ACCESS_KEY=admin
MINIO_SECRET_KEY=adminadmin
MINIO_SECURE=false
MINIO_BUCKET_NAME=rag-docs

# ==========================================
# CHROMA DB (VECTOR DATABASE)
# ==========================================
CHROMA_HOST=localhost
CHROMA_PORT=8000
CHROMA_COLLECTION_NAME=rag_documents

# ==========================================
# REDIS CONFIGURATION
# ==========================================
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_DB=0
REDIS_PASSWORD=

# ==========================================
# JWT CONFIGURATION
# ==========================================
JWT_SECRET_KEY=changeme_dev_secret
JWT_ALGORITHM=HS256
JWT_ACCESS_TOKEN_EXPIRE_MINUTES=30
JWT_REFRESH_TOKEN_EXPIRE_DAYS=7

# ==========================================
# SERVICE CONFIGURATION
# ==========================================
# Service ports (should match docker-compose.yml)
AUTH_SVC_PORT=8101
FILES_SVC_PORT=8102
SANITIZE_SVC_PORT=8103
INDEXER_SVC_PORT=8104
RAG_SVC_PORT=8105
FEEDBACK_SVC_PORT=8106
AGENT_SVC_PORT=8107
MCP_SERVER_PORT=8108

# ==========================================
# PII DETECTION (PRESIDIO)
# ==========================================
PRESIDIO_ANALYZERS=PHONE_NUMBER,EMAIL_ADDRESS,CREDIT_CARD,IBAN_CODE,US_SSN,US_BANK_NUMBER,CRYPTO,UK_NHS,PERSON,LOCATION,DATE_TIME,NRP
PRESIDIO_LANGUAGES=en,es
PRESIDIO_CONFIDENCE_THRESHOLD=0.5

# ==========================================
# EMBEDDING CONFIGURATION
# ==========================================
EMBEDDING_MODEL=intfloat/e5-large-v2
EMBEDDING_DIMENSION=1024
EMBEDDING_MAX_SEQ_LENGTH=512

# ==========================================
# RAG CONFIGURATION
# ==========================================
RAG_TOP_K=4
RAG_SIMILARITY_THRESHOLD=0.7
RAG_MAX_CONTEXT_LENGTH=4000
RAG_CHUNK_SIZE=1000
RAG_CHUNK_OVERLAP=200

# ==========================================
# LOGGING CONFIGURATION
# ==========================================
LOG_LEVEL=INFO
LOG_FORMAT=json
LOG_FILE=logs/app.log

# ==========================================
# DEVELOPMENT SETTINGS
# ==========================================
DEBUG=true
RELOAD=true
WORKERS=1

# ==========================================
# SECURITY SETTINGS
# ==========================================
CORS_ORIGINS=http://localhost:3000,http://localhost:8080,http://localhost:5173
ALLOWED_HOSTS=localhost,127.0.0.1,0.0.0.0

# ==========================================
# MONITORING & METRICS
# ==========================================
ENABLE_METRICS=true
METRICS_PORT=9090
ENABLE_TRACING=false

# ==========================================
# BACKUP CONFIGURATION
# ==========================================
BACKUP_ENABLED=false
BACKUP_SCHEDULE=daily
BACKUP_RETENTION_DAYS=30

# ==========================================
# EXTERNAL INTEGRATIONS
# ==========================================
# Slack webhook for notifications
SLACK_WEBHOOK_URL=

# Email configuration for alerts
SMTP_SERVER=smtp.gmail.com
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
EMAIL_FROM=noreply@rag-mvp.com

# ==========================================
# FEATURE FLAGS
# ==========================================
ENABLE_FEEDBACK_COLLECTION=true
ENABLE_CITATION_TRACKING=true
ENABLE_QUERY_LOGGING=true
ENABLE_PII_SANITIZATION=true

# ==========================================
# RATE LIMITING
# ==========================================
RATE_LIMIT_REQUESTS_PER_MINUTE=60
RATE_LIMIT_BURST_SIZE=10

# ==========================================
# CACHE CONFIGURATION
# ==========================================
CACHE_TTL_SECONDS=3600
CACHE_MAX_SIZE_MB=100

# ==========================================
# TRAEFIK DASHBOARD
# ==========================================
TRAEFIK_DASH_USER=admin
TRAEFIK_DASH_PASS=admin
